{include="header"}

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-6">
            <div class="btn-group">
                <a href="{$gsc->model->url('list')}" class="btn btn-sm btn-default">
                    <i class="fa fa-chevron-left fa-fw" aria-hidden="true"></i>
                    <span class="d-none d-sm-block">Todo</span>
                </a>
                <a class="btn btn-sm btn-default" href="{$gsc->model->url()}" title="Recargar la página">
                    <i class="bi bi-bootstrap-reboot" aria-hidden="true"></i>
                </a>
            </div>
            <a href="{$gsc->model->url('new')}" class="btn btn-sm btn-success">
                <i class="fa fa-plus fa-fw" aria-hidden="true"></i>
                <span class="d-none d-sm-block">Nuevo</span>
            </a>
        </div>
        <div class="col-sm-6 text-end">
            <span class="h2 text-capitalize">
                {$gsc->page->folder} / {$gsc->page->title} / {$gsc->model->primary_column_value()}
            </span>
        </div>
    </div>
</div>

<br/>

<div class="container-fluid">
    <form action="{$gsc->model->url('edit')}" method="post" class="form">
        <input type="hidden" name="action" value="edit"/>
        <input type="hidden" name="petition_id" value="{$gsc->random_string()}"/>
        <div class="row">
            {loop="$gsc->form->columns"}
            <div class="col-sm-{$value.num_cols}">
                {$gsc->form->show($key, $value, $gsc->model)}
            </div>
            {/loop}
        </div>
        <div class="row">
            <div class="col-xs-4">
                <a href="#" id="btn_delete_model" class="btn btn-sm btn-danger">
                    <i class="fa fa-floppy-o fa-fw" aria-hidden="true"></i>
                    <span class="d-none d-sm-block hidden-sm">Eliminar</span>
                </a>
            </div>
            <div class="col-xs-8 text-end">
                <a class="btn btn-sm btn-default" href="{$gsc->model->url()}" title="Recargar la página">
                    <i class="bi bi-bootstrap-reboot fa-fw" aria-hidden="true"></i>
                    <span class="d-none d-sm-block hidden-sm">Deshacer</span>
                </a>
                <button class="btn btn-sm btn-primary" type="submit">
                    <i class="fa fa-floppy-o fa-fw" aria-hidden="true"></i>
                    <span class="d-none d-sm-block">Guardar</span>
                </button>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#btn_delete_model").click(function (event) {
            event.preventDefault();
            bootbox.confirm({
                message: '¿Realmente desea eliminar? Esta acción no se puede deshacer',
                title: '<b>Atención</b>',
                callback: function (result) {
                    if (result) {
                        window.location.href = '{$gsc->model->url()}&action=delete';
                    }
                }
            });
        });
    });
</script>

{include="footer"}